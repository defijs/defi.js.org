

<!DOCTYPE html>
<html>
	<head>
		<title>Matreshka.js 2</title>
		<meta name="description" content="Matreshka.js 2 - The easiest framework in the Universe">
		<meta name="viewport" content="initial-scale=1, width=device-width">
		<meta charset="UTF-8">
		<link rel="apple-touch-icon" sizes="57x57" href="icons/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="icons/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="icons/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="icons/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="icons/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="icons/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="icons/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="icons/apple-touch-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon-180x180.png">
		<link rel="icon" type="image/png" href="icons/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="icons/favicon-194x194.png" sizes="194x194">
		<link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="icons/android-chrome-192x192.png" sizes="192x192">
		<link rel="icon" type="image/png" href="icons/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="icons/manifest.json">
		<link rel="shortcut icon" href="icons/favicon.ico">
		<link rel="dns-prefetch" href="//google-analytics.com/">
		<meta name="apple-mobile-web-app-title" content="{{ page.title }}">
		<meta name="application-name" content="{{ page.title }}">
		<meta name="msapplication-TileColor" content="#00aba9">
		<meta name="msapplication-TileImage" content="icons/mstile-144x144.png">
		<meta name="msapplication-config" content="icons/browserconfig.xml">
		<meta name="theme-color" content="#8BC34A">
		<meta name="google-site-verification" content="h6PRRaItZUtT98WEfeFWdOwlBs3eYUaq4EnFjBLtvAM">
		<meta property="og:image" content="http://matreshka.io/img/mk_logo.png">

		<style>
			.loader {
				position: fixed;
				width: 100%;
				height: 100%;
				z-index: 10;
				background: rgba(255,255,255,0.75);
				text-align: center;
			}

			.loader-inner {
				border: 8px solid rgba(100,100,100,0.5);
			    border-radius: 50%;
			    width: 80px;
			    height: 80px;
			    animation: loader-spin 1s linear infinite;

				border-top: 8px solid  #8BC34A;

				position: fixed;
				top: 50%;
				left: 50%;
				margin-top: -40px;
				margin-left: -40px;
			}

			@keyframes loader-spin {
			    0% { transform: rotate(0deg); }
			    100% { transform: rotate(360deg); }
			}
		</style>
	<link href="css/style.css" rel="stylesheet"></head>
	<body>
		<div class="loader">
			<div class="loader-inner"> </div>
		</div>
		<link rel="stylesheet" href="css/fonts.css">
		<link rel="stylesheet" href="css/style.css">

		<header>
			<div class="header-content">
				<i class="show-nav"></i>
				<div class="inner"></div>
				<i class="show-search"></i>
			</div>
			<div class="search-content">
				<i class="back"></i><input type="text" class="search">
				<ul class="search-results-dropdown"></ul>
			</div>
		</header>
		<iframe id="typo-iframe" class="hide" name="typo-iframe"></iframe>
		<iframe id="notification-iframe" class="hide" name="notification-iframe"></iframe>
		<form class="hide notification-form" method="POST" target="notification-iframe">
			<input type="hidden" class="page">
			<input type="hidden" class="text">
			<input type="hidden" class="type">
		</form>
		<nav>
	<span class="view-switcher">
		<span data-value="all" class="checked">Everything</span><span data-value="per-one">One by one</span>
	</span>
	<span class="nav-heading">Start</span>
	<a href="#!home">Home</a>
	<a href="#!introduction" hidden>Introduction</a>
	<a href="#!examples" hidden>Examples</a>
	<hr>
	<div class="api">
		
		<ul>
			
				<li><span class="nav-heading">Static Methods</span></li>
			

			
				<li>
					<a href="#!defi.bindNode"
						title="Binds a property of an object to HTML node, implementing two-way data binding
"
						data-name="bindNode"
						
					>
						bindNode
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.bindNode">
								
									<li>
										<a href="#!defi.bindNode(2)"
											title="Alternative syntax: passing of an object
"
											data-name="bindNode#2"
											
										>
											#2
										</a>
									</li>
								
									<li>
										<a href="#!defi.bindNode(3)"
											title="Alternative syntax which makes possible to define unlimited amount of bindings per one bindNode call.
"
											data-name="bindNode#3"
											
										>
											#3
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			
				<li>
					<a href="#!defi.bindOptionalNode"
						title="Works just the same as defi.bindNode but it does not throw an exception if the node argument is an empty array, undefined or non-existent.
"
						data-name="bindOptionalNode"
						
					>
						bindOptionalNode
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.calc"
						title="Creates a dependency of one property value on values of others
"
						data-name="calc"
						
					>
						calc
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.calc">
								
									<li>
										<a href="#!defi.calc(batch)"
											title="Extra syntax for defi.calc. Allows to define few calculated properties per single call of the function.
"
											data-name="calc#batch"
											
										>
											#batch
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			
				<li>
					<a href="#!defi.chain"
						title="Allows chained calls of defi.js functions
"
						data-name="chain"
						
					>
						chain
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.lookForBinder"
						title=""
						data-name="lookForBinder"
						
					>
						lookForBinder
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.mediate"
						title="Transforms property value on its changing
"
						data-name="mediate"
						
					>
						mediate
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.mediate">
								
									<li>
										<a href="#!defi.mediate(2)"
											title="Alternative syntax of the defi.mediate function which accepts &quot;key-mediator&quot; object as an argument
"
											data-name="mediate#2"
											
										>
											#2
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			
				<li>
					<a href="#!defi.off"
						title="Deletes an event handler
"
						data-name="off"
						
					>
						off
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.on"
						title="Adds an event handler
"
						data-name="on"
						
					>
						on
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.on">
								
									<li>
										<a href="#!defi.on(2)"
											title="Alternative syntax: &quot;eventname-handler&quot; pairs
"
											data-name="on#2"
											
										>
											#2
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			
				<li>
					<a href="#!defi.remove"
						title="Deletes a property and removes dependent handlers
"
						data-name="remove"
						
					>
						remove
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.set"
						title="Sets a property value allowing to pass event options object
"
						data-name="set"
						
					>
						set
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.set">
								
									<li>
										<a href="#!defi.set(2)"
											title="Alternative &quot;key-value&quot; syntax of the defi.set function
"
											data-name="set#2"
											
										>
											#2
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			
				<li>
					<a href="#!defi.trigger"
						title="Fires an event
"
						data-name="trigger"
						
					>
						trigger
						
					</a>

					
				</li>

			
				<li>
					<a href="#!defi.unbindNode"
						title="Destroys a binding between given property and HTML node
"
						data-name="unbindNode"
						
					>
						unbindNode
						
							<span class="expand"></span>
							<span class="hidden-active-child"></span>
						
					</a>

					
						<div class="submenu-wrapper">
							<ul data-submenu="!defi.unbindNode">
								
									<li>
										<a href="#!defi.unbindNode(2)"
											title="Alternative syntax which allows to pass an object with bindings to unbindNode. Look at defi.bindNode(2) for more information
"
											data-name="unbindNode#2"
											
										>
											#2
										</a>
									</li>
								
									<li>
										<a href="#!defi.unbindNode(3)"
											title="Alternative syntax of the function which allows to easily unbind unlimited amount of bindings by single unbindNode call.
"
											data-name="unbindNode#3"
											
										>
											#3
										</a>
									</li>
								
							</ul>
						</div>
					
				</li>

			

			
				<li><span class="nav-heading">Static Props</span></li>
			
			
				<li>
					<a
						href="#!defi.defaultBinders"
						title="An array of functions which return a corresponding binder
"
						data-name="defaultBinders"
						
					>
						defaultBinders
					</a>
				</li>
			
		</ul>


	</div>
	<hr>
	<span class="nav-heading" hidden>Info</span>
	<a href="#!faq" hidden>FAQ</a>
	<hr>
	<a>Last update 14.4.2018</a>
</nav>


<main>
	<section id="promo">
	<article id="!home">
		<h1 class="logo">defi.js</h1>
		<div class="demo">
			<output class="out">The magic of accessors</output>
			THE WEBSITE IS UNDER DEVELOPMENT YET
			<input type="text" class="in">
			<pre><code class="lang-html">&lt;input class=&quot;in&quot; type=&quot;text&quot;&gt;
&lt;output class=&quot;out&quot;&gt;&lt;/output&gt;

&lt;script src=&quot;defi.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
const obj = {};
defi.bindNode(obj, 'x', '.in, .out');
obj.x = 'The magic of accessors';
&lt;/script&gt;</code></pre>
		</div>
		<p>
			<a href="https://github.com/matreshkajs/defi/archive/gh-pages.zip" download="matreshkajs.zip" class="download-btn">Download <i></i></a>
			<a href="https://github.com/finom/defi" class="github-btn">Github <i></i></a>
		</p>
	</article>
</section>

	<section hidden>
		<article id="!introduction">
			<h2 id="introduction"><a href="#!introduction">Introduction</a></h2>
<h3 id="features">Features</h3>
<ul>
<li>Reactive API which allows to solve hard and confusing problems easily</li>
<li>High robustness of developed apps</li>
<li>The ability to refactor legacy applications without rewriting them from scratch</li>
<li>Only couple of hours is needed to master the framework because of an absence of complex concepts</li>
<li>One of the most user-friendly documentations among JavaScript libraries</li>
</ul>
<h3 id="who-needs-such-framework-">Who needs such framework?</h3>
<blockquote>
<p>Matreshka.js fills the gap between a junior and a senior</p>
</blockquote>
<ul>
<li>For those who is new at JavaScript, wishing to master the development of single-page applications</li>
<li>For full-stack devs, for whom front-end development is in the second place after the back-end</li>
<li>For all those who are not satisfied with the current order of things in the universe of web development</li>
</ul>
<h3 id="what-s-the-business-need-solved-by-matreshka-js-framework-">What&#39;s the business need solved by Matreshka.js framework?</h3>
<p>It is not a secret that the barrier to entry into the web development is becoming higher, the list of requirements to a developer is bigger, a number of dependencies in projects may be up to several hundred. Despite the fact that the studying of JavaScript is very popular today, the demand for developers who can accomplish tasks successfully is greater than the supply.</p>
<p>Due to extreme simplicity of the framework, even novice web developers can quickly start to do small, then medium and then large web applications. This means that web studios are able to save money by hiring younger professionals, who, in turn, could not find a job before.</p>
<h3 id="it-is-only-for-beginners-">It is only for beginners?</h3>
<p>Two things that present Matreshka.js as a simple framework are use of selectors of bound DOM nodes when declaring a two-way data binding and an absence of any restrictions on requirements of an architecture and design patterns. In other aspects Matreshka.js is a modern general-purpose framework developed using today&#39;s technologies. At least, Matreshka.js may cause an interest because it uses the full potential of getters and setters in JavaScript.</p>

		</article>
		<article id="!examples">
			<h2 id="examples"><a href="#!examples">Examples</a></h2>
<h3 id="hello-world-">Hello World!</h3>
<p>Writing your first application is very easy. You should:</p>
<p><strong>1.</strong> Create an HTML file with the following content</p>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;My first Matreshka.js application&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;input type=&quot;text&quot; class=&quot;my-input&quot;&gt;
        &lt;div class=&quot;my-output&quot;&gt;&lt;/div&gt;
        &lt;script
          src=&quot;https://matreshkajs.github.io/matreshka/matreshka.min.js&quot;&gt;
        &lt;/script&gt;
        &lt;script src=&quot;js/app.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>2.</strong> Create the application class at <strong>js/app.js</strong></p>
<pre><code class="lang-js">// store html binder in a short variable
const htmlBinder = Matreshka.binders.html;

// create the class which inherits Matreshka
class Application extends Matreshka {
    constructor() {
        super();

        // bind a property x and the text field
        this.bindNode(&#39;x&#39;, &#39;.my-input&#39;);

        // bind the property x and the &quot;.my-output&quot; block
        this.bindNode(&#39;x&#39;, &#39;.my-output&#39;, htmlBinder());

        // if the property &quot;х&quot; has changed,
        // inform about it in the console
        this.on(&#39;change:x&#39;, () =&gt;
            console.log(`x is changed to &quot;${this.x}&quot;`));
    }
}

const app = new Application();
</code></pre>
<p><strong>3.</strong> That&#39;s it!</p>
<p>Now you can open the developer&#39;s console (by pressing F12) and write:</p>
<pre><code class="lang-js">app.x = &#39;Hello World!&#39;;
</code></pre>
<p>Cool, isn&#39;t it? You can work with such magical properties directly.</p>
<h4 id="links">Links</h4>
<ul>
<li><a href="#!Matreshka">Matreshka Class</a></li>
<li><a href="#!Matreshka-bindNode">Matreshka#bindNode method</a></li>
<li><a href="#!Matreshka-on">Matreshka#on method</a></li>
</ul>
<p><span class="list-item-number">1.</span>
<a href="https://github.com/matreshkajs/todomvc/tree/master/"
class="example-link">TodoMVC</a> - a to-do list. (<a href="//matreshkajs.github.io/todomvc/docs/app.html">Source code with annotations</a>)</p>
<p><span class="list-item-number">2.</span>
<a href="https://github.com/matreshkajs/examples-and-tutorials/tree/master/treeview/"
class="example-link">TreeView</a> of unlimited nesting depth.</p>
<p><span class="list-item-number">3.</span>
<a href="https://github.com/matreshkajs/examples-and-tutorials/tree/master/markdown-editor/"
class="example-link">Markdown editor</a> made with few lines of code.</p>
<p><span class="list-item-number">4.</span>
<a href="https://github.com/matreshkajs/examples-and-tutorials/tree/master/soundcloud-search/"
class="example-link">Simple SoundCloud player</a> - music search via SoundCloud API.</p>
<p><span class="list-item-number">5.</span>
<a href="https://github.com/matreshkajs/examples-and-tutorials/tree/master/contact-list/"
class="example-link">Contact List</a> - allows to add, remove, sort, search and change contacts.</p>

		</article>
	</section>
	<section>

</section>
<section class="api">

	<article
	class="item class"
	id="!defi"
>
	<h2>
		<a href="#!defi">
			<span class="signature-class">Class</span> defi
		</a>
	</h2>

	
	<div class="description">
		<p>The defi.js library namespace</p>

	</div>
	

	

	

 

	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi" data-title="Class defi">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi"
  title="Class defi"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>


<article class="item method" id="!defi.bindNode">
	<h2>
		<a href="#!defi.bindNode">
			<span class="memberof">defi.</span>bindNode<wbr>(<span class="args">obj, key, node, binder, eventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Binds a property of an object to HTML node, implementing two-way data binding</p>
</div>
	<div class="description"><p>It creates a bridge between value of a property and a state of HTML node on the page: from a simple input to a complicated widget (the complexity of elements is unlimited). After using this function, it isn&#39;t necessary to monitor the synchronizations between model and view.</p>
<p>The function acepts three arguments: <strong>a property name</strong>, <strong>HTML node</strong> and a <strong>binding rule</strong> (a binder). In its turn, a binder is an ordinary object and it can have the following properties: <code>on</code>, <code>getValue</code>, <code>setValue</code>, <code>initialize</code>, <code>destroy</code> (Read more here: <span data-type="binder">binder</span>). All the five properties are optional. It also allows to declare one-way data bindings (any direction).</p>
<blockquote>
<p>The <code>bindNode</code> function  supports the many-to-many bindings. Several elements can be bound to one property and several properties can be bound to one element, including ones from different objects.</p>
</blockquote>
<pre><code class="lang-js">defi.bindNode(object, &#39;myKey&#39;, &#39;.my-element&#39;, {
    on: &#39;click&#39;,
    getValue() { ... },
    setValue() { ... }
});
</code></pre>
<p>For example, you want to bind a property of an object to a <code>input[type=&quot;checkbox&quot;]</code> node:
defijs
this.bindNode(obj, &#39;myKey&#39;, &#39;.my-checkbox&#39;, {
    // when is element state changed?
    // - after &#39;click&#39; event
    on: &#39;click&#39;,
    // how to extract element state?
    // - return &#39;checked&#39; value
    getValue() {
        return this.checked;
    },
    // how to set element state?
    // - set &#39;checked&#39; value
    setValue(v) {
        this.checked = !!v;
    }
});</p>
<pre><code>
After binding is declared, you can set value of an object property in your most habitual way and HTML node (in this case, a checkbox) will change its state immediately. After clicking on the checkbox, the property value will be changed to the corresponding one as well.

```js
// sets checked = true
obj.myKey = true;
</code></pre><p>More complicated example: binding object property to jQuery UI widget</p>
<pre><code class="lang-html">&lt;div class=&quot;my-slider&quot;&gt;&lt;/div&gt;
</code></pre>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-slider&#39;, {
    // when is element state changed?
    // - after &#39;slide&#39; event
    on: &#39;slide&#39;,
    // how to extract element state?
    // - return &#39;value&#39; of the widget
    getValue() {
        return $(this).slider(&#39;option&#39;, &#39;value&#39;);
    },
    // how to set element state?
    // - set &#39;value&#39;
    setValue(v) {
        $(this).slider(&#39;option&#39;, &#39;value&#39;, v);
    },
    // how to initialize the widget?
    // you can initialize the slider in any way,
    // but &#39;initialize&#39; function provides some syntactic sugar
    initialize() {
        $(this).slider({ min: 0, max: 100 });
    }
});
</code></pre>
<pre><code class="lang-js">// will set the slider value 42
obj.myKey = 42;
</code></pre>
<p>It looks easy but you may ask a question: &quot;What should I do to avoid writing these rules every time?&quot;. Indeed, there can be a lot of elements of the same type on the page: text fields, drop down menus, fields from the HTML5 specification as well as third party widgets (see the example above).</p>
<p>As observed in this documentation, the third argument is not obligatory for the ones of the <code>bindNode</code> function (see below). This problem is solved by the <a href="#!defi.defaultBinders">defi.defaultBinders</a> array which contains functions checking an HTML node against a set of rules and returns corresponding binder or <code>undefined</code>. You get an opportunity to reduce your code a great deal, putting  binding rules into a separate part of your code and to use a syntax for binding without the third argument:</p>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-element&#39;);
</code></pre>
<p>How to do it? You should add a function checking an element against a set of rules to the beginning of the <a href="#!defi.defaultBinders">defi.defaultBinders</a> array.</p>
<pre><code class="lang-js">const checkboxBinder = () =&gt; {
    return {
        on: &#39;click&#39;,
        getValue() {
            return this.checked;
        },
        setValue(v) {
            this.checked = !!v;
        }
    }
};

// the unshift function adds the function
// to the beginning of the defi.defaultBinders array
defi.defaultBinders.unshift(node =&gt; {
    // check if the element is a checkbox
    if(node.tagName == &#39;INPUT&#39; &amp;&amp; node.type == &#39;checkbox&#39;) {
        // if checking is OK, return a new binder
        return checkboxBinder();
    }
});
</code></pre>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-checkbox&#39;);
obj.myKey = true;
</code></pre>
<p>What should you do if you need to pass arguments for initializing some plugin or a widget? You can call the function that returns a binder manually.</p>
<pre><code class="lang-js">const uiSlider = (min, max) =&gt; {
    return {
        on: &#39;slide&#39;,
        getValue() {
            return $(this).slider(&#39;option&#39;, &#39;value&#39;);
        },
        setValue(v) {
            $(this).slider(&#39;option&#39;, &#39;value&#39;, v);
        },
        initialize() {
            $(this).slider({ min: min, max: max });
        }
    }
};
</code></pre>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey1&#39;, &#39;.my-slider1&#39;, uiSlider(0, 100));
defi.bindNode(obj, &#39;myKey2&#39;, &#39;.my-slider2&#39;, uiSlider(1, 1000));
obj.myKey1 = 42;
obj.myKey2 = 999;
</code></pre>
<p><a href="#!defi.defaultBinders">defi.defaultBinders</a> OOB has a support for <strong>all form elements</strong> without any exception: <code>select</code> (including <code>multiple</code>), <code>textarea</code>, <code>output</code>, <code>input</code> (including all types from the specification of HTML5: <code>text</code>, <code>checkbox</code>, <code>radio</code>, <code>range</code>, <code>number</code>, <code>date</code>, <code>search</code>, <code>time</code>, <code>datetime</code>, <code>datetime-local</code>, <code>color</code> and others). That means it is not necessary to designate a binder for standard elements.</p>
<pre><code class="lang-html">&lt;input type=&quot;color&quot; class=&quot;my-color-input&quot;&gt;
</code></pre>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myColor&#39;, &#39;.my-color-input&#39;);
obj.myColor = &#39;#66bb6a&#39;;
</code></pre>
<p>Besides, after the binding, a new non-standard <code>:bound(KEY)</code> CSS selector is available for you.</p>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-element&#39;);

// will find the element &#39;.my-inner-element&#39; inside &#39;.my-element&#39;
defi.bindNode(obj, &#39;myAnotherKey&#39;, &#39;:bound(myKey) .my-inner-element&#39;);
</code></pre>
<p>And the syntax of possible event names is extended:</p>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-element&#39;);

// will handle the click on the &#39;.my-element&#39; element
defi.on(obj, &#39;click::myKey&#39;, () =&gt; { ... });

// will handle the click on the &#39;.my-element .my-inner-element&#39;
defi.on(&#39;click::myKey(.my-inner-element)&#39;, () =&gt; { ... });
</code></pre>
<blockquote>
<p>If a node is not found <code>&quot;Bound element is missing&quot;</code> error will be thrown. Check out <a href="#!defi.bindOptionalNode">defi.bindOptionalNode</a>.</p>
</blockquote>
<h3 id="important-features-of-the-function-and-special-flags">Important features of the function and special flags</h3>
<p>The fourth argument of <code>bindNode</code> function is  <code>eventOptions</code>. As usual this object can include special flags or custom data which will be passed to <code>bind</code> and <code>bind:KEY</code> event handlers.</p>
<pre><code class="lang-js">defi.on(obj, &#39;bind:x&#39;, evt =&gt; {
    console.log(evt.foo); // bar
});
defi.bindNode(obj, &#39;x&#39;, node, binder, { foo: &#39;bar&#39; });
</code></pre>
<p>To understand important features of <code>bindNode</code> it is required to read information below but it&#39;s not required to remember all these flags.</p>
<h4 id="a-flag-exactkey-false-">A flag <code>exactKey=false</code></h4>
<p>If <code>key</code> string includes a dot then such string will be interpreted as a path to a property of nested object. The library will listen all changes of given object tree.</p>
<pre><code class="lang-js">obj.a = { b: { c: &#39;foo&#39; } };
defi.bindNode(obj, &#39;a.b.c&#39;, node);

obj.a.b.c = &#39;bar&#39;; // updates node by bar

const oldB = this.a.b;

obj.a.b = { c: &#39;baz&#39; }; // updates node by baz

// the node is not updated because
// the connection with the object subtree is destroyed
oldB.c = &#39;fuu&#39;;
</code></pre>
<p>In case if you need to use property name as is, use  <code>exactKey</code> flag with <code>true</code> value.</p>
<pre><code class="lang-js">obj[&#39;a.b.c&#39;] = &#39;foo&#39;;
defi.bindNode(obj, &#39;a.b.c&#39;, node, binder, {
    exactKey: true
});
obj[&#39;a.b.c&#39;] = &#39;bar&#39;;
</code></pre>
<h4 id="a-flag-getvalueonbind-">A flag <code>getValueOnBind</code></h4>
<p>When <code>getValue</code> is given then a state of an element will be extracted and assigned to bound property immediately after <code>bindNode</code> call in case if the property has <code>undefined</code> value. To force this behavior even if the property has non-undefined value use <code>getValueOnbind</code> flag with <code>true</code> value. To cancel this behavior use the same flag with <code>false</code> value.</p>
<h4 id="a-flag-setvalueonbind-">A flag <code>setValueOnBind</code></h4>
<p>When <code>setValue</code> is given then the value of the property will be set as element state immediately after <code>bindNode</code> call in case if the property has non-undefined value. To force this behavior even if the property is <code>undefined</code> use <code>setValueOnBind</code> flag with <code>true</code> value. To cancel this behavior use the same flag but with <code>false</code> value.</p>
<h4 id="flags-debouncegetvalue-true-and-debouncesetvalue-true-">Flags <code>debounceGetValue=true</code> and <code>debounceSetValue=true</code></h4>
<p>One of the most important feature of <code>bindNode</code> is that the logic of property change and the logic of element state change uses debounce pattern. It means that if bound property is changed many times in a short time then bound element state will be updated only once after small delay (thanks to <code>debounceSetValue=true</code>). If element state is changed many times in a short time (eg corresponding DOM event is triggered), the property gets new value only once after minimum delay (thanks to <code>debounceGetValue=true</code>).</p>
<pre><code class="lang-js">const input = document.querySelector(&#39;.my-input&#39;);
this.bindNode(&#39;x&#39;, input);
this.x = &#39;foo&#39;;
console.log(input.value === &#39;foo&#39;); // false
setTimeout(() =&gt; {
    console.log(input.value === &#39;foo&#39;); // true
});
</code></pre>
<p>To cancel this behavior (e. g. initiate synchronous binding) use <code>debounceSetValue</code> and/or <code>debounceGetValue</code> flags with <code>false</code> value.</p>
<h4 id="flags-debouncesetvalueonbind-false-and-debouncegetvalueonbind-false-">Flags <code>debounceSetValueOnBind=false</code> and <code>debounceGetValueOnBind=false</code></h4>
<p>As described above <code>bindNode</code> uses debounce pattern on property change and on bound node change. This doesn&#39;t apply to a moment when <code>bindNode</code> is called. To remind, when the function is called a property or a node is changed immediately. When <code>debounceGetValueOnBind</code> and/or <code>debounceSetValueOnBind</code> are set to <code>true</code> then debounce is turned on for binding initialization as well.</p>
<h4 id="flags-debouncesetvaluedelay-0-debouncegetvaluedelay-0-">Flags <code>debounceSetValueDelay=0</code> и <code>debounceGetValueDelay=0</code></h4>
<p>These flags allow to set debounce delay. <code>debounceSetValueDelay</code> is used when <code>debounceSetValue</code> or <code>debounceSetValueOnBind</code> is <code>true</code>, <code>debounceGetValueDelay</code> is used when <code>debounceGetValue</code> or <code>debounceGetValueOnBind</code> is true.</p>
<h4 id="a-flag-useexactbinder-false-">A flag <code>useExactBinder=false</code></h4>
<p>Even if you pass a binder to <code>bindNode</code>, the framework tries to find default binder at <a href="#!defi.defaultBinder">defi.defaultBinder</a> and extend it by properties of the passed object. This feature makes possible to use partially re-defined default binder.</p>
<p>For example, we want to bind <code>input[type=&quot;text&quot;]</code> to a property. By default, the standard binder contains <code>&quot;on&quot;</code> property with <code>&quot;input&quot;</code> value for this kind of node. It means that the value of the object property and node state will be synchronized when a user releases a key of the keyboard or pastes text from clipboard. In case if you want synchronization to be performed after the <code>&quot;blur&quot;</code> DOM event, you need to pass an object containing the only <code>&quot;on&quot;</code> property as the third argument. This object will extend the default binder, having retained <code>getValue</code> and <code>setValue</code> values.</p>
<pre><code class="lang-js">defi.bindNode(obj, &#39;myKey&#39;, &#39;.my-input&#39;, { on: &#39;blur&#39; });
</code></pre>
<p>To cancel this behavior and use the binder as is, you can use <code>useExactBinder</code> flag with <code>true</code> value.</p>
<pre><code class="lang-js">defi.bindNode(obj, &#39;x&#39;, node, binder, {
    useExactBinder: true
});
</code></pre>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - object


	</p>
	
	
	<p>
		<b>Fires</b> <span class="event">bind</span> <span class="event">bind:KEY</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						key
						
					</td>
					 
					<td>
	<span data-type="string">string</span>
</td>
					<td> <p>A property name</p>
</td>
				</tr>
			
				<tr>
					<td>
						node
						
					</td>
					 
					<td>
	<span data-type="string">string</span>

	<span data-type="node">node</span>

	<span data-type="$nodes">$nodes</span>
</td>
					<td> <p>An HTML element which must be bound to a <code>key</code></p>
</td>
				</tr>
			
				<tr>
					<td>
						binder
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="binder">binder</span>
</td>
					<td> <p>A binder containing the following properties: <code>on</code> , <code>getValue</code>, <code>setValue</code>, <code>initialize</code>, <code>destroy</code>. You can get more detailed information about binders in their documentation: see <span data-type="binder">binder</span></p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>An event options which accepts <code>&quot;silent&quot;</code> (don&#39;t fire <code>&quot;bind&quot;</code> and <code>&quot;bind:KEY&quot;</code>), flags described above or custom data</p>
</td>
				</tr>
			
		</tbody>
	</table>


	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.unbindNode">defi.unbindNode</a>
	
		<li><a href="#!defi.bindOptionalNode">defi.bindOptionalNode</a>
	
		<li><a href="#!defi.defaultBinders">defi.defaultBinders</a>
	
</ul>


	

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.bindNode.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.bindNode" data-title="Method defi.bindNode">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.bindNode"
  title="Method defi.bindNode"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.bindNode(2)">
	<h2>
		<a href="#!defi.bindNode(2)">
			<span class="memberof">defi.</span>bindNode<wbr>(<span class="args">obj, bindings, binder, eventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Alternative syntax: passing of an object</p>
</div>
	<div class="description"><p>To the <a href="#!defi.bindNode">defi.bindNode</a> function an object can be passed to avoid multiple invocation of the function and reduce code. Keys of the object are property names and values can get the following look:</p>
<ul>
<li>A node;</li>
<li>An object with properties <code>node</code> and <code>binder</code>;</li>
<li>An array of objects with properties <code>node</code> and <code>binder</code>;</li>
</ul>
<p>If <code>binder</code> arg is passed as the second argument then it wil be used as the binder for those elements for which a binder wasn&#39;t specified.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - object


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						bindings
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>(see the example)</p>
</td>
				</tr>
			
				<tr>
					<td>
						binder
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="binder">binder</span>
</td>
					<td> <p>(see above)</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>(see above)</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.bindNode(obj, {
	foo: '.custom-checkbox',
	'bar.length': 'textarea'
});</code></pre>

<pre><code class="lang-js">defi.bindNode(obj, {
	foo: {
		node: ':sandbox .aaa',
		binder: myBinder()
	},
	bar: '.bbb',
	baz: [{
		node: '.ccc'
	}, {
		node: document.querySelector('.ddd'),
		binder: myBinder('baz')
	}]
}, {
	// will be used as a binder for .bbb and .ccc
	setValue(value) {
		foo(value);
	}
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.bindNode.jsdoc.js#L277">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.bindNode(2)" data-title="Method defi.bindNode(2)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.bindNode(2)"
  title="Method defi.bindNode(2)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.bindNode(3)">
	<h2>
		<a href="#!defi.bindNode(3)">
			<span class="memberof">defi.</span>bindNode<wbr>(<span class="args">obj, batch, commonEventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Alternative syntax which makes possible to define unlimited amount of bindings per one <code>bindNode</code> call.</p>
</div>
	<div class="description"><p>The function variation allows to pass an array of objects which need to include the following properties:</p>
<ul>
<li><code>key</code> - a property name</li>
<li><code>node</code> - an HTML element which must be bound to a <code>key</code></li>
<li><code>binder</code> - a binder (optional)</li>
<li><code>event</code> - event options (optional)</li>
</ul>
<p>The second arg object includes common event options for all bindings and extends <code>event</code> object (properties from <code>event</code> has more priority).</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - object


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						batch
						
					</td>
					 
					<td>
	<span data-type="array">array</span>
</td>
					<td> <p>A batch of bindings</p>
</td>
				</tr>
			
				<tr>
					<td>
						commonEventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>Common event options</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.bindNode(obj, [{
	key: 'a',
	node: '.my-node',
	binder: {
		setValue(v) {
			doSomething(v);
		}
	}
}, {
	key: 'b',
	node: document.querySelectorAll('.bar')
	event: {
		foo: 'bar'
	}
}, {
	key: 'c.d.e',
	node: jQuery('.baz'),
	binder: defi.binders.html(),
	event: {
		silent: true,
		exactKey: true
	}
}], {
	getValueOnBind: false
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.bindNode.jsdoc.js#L324">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.bindNode(3)" data-title="Method defi.bindNode(3)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.bindNode(3)"
  title="Method defi.bindNode(3)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.bindOptionalNode">
	<h2>
		<a href="#!defi.bindOptionalNode">
			<span class="memberof">defi.</span>bindOptionalNode()
		</a> 
	</h2>
	
	
	<div class="summary"><p>Works just the same as <a href="#!defi.bindNode">defi.bindNode</a> but it does not throw an exception if the <code>node</code> argument is an empty array, <code>undefined</code> or non-existent.</p>
</div>
	<div class="description"></div>
	
	

	

	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.bindNode">defi.bindNode</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.bindOptionalNode(obj, 'myKey', '.my-element');</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.bindOptionalNode.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.bindOptionalNode" data-title="Method defi.bindOptionalNode">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.bindOptionalNode"
  title="Method defi.bindOptionalNode"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.calc">
	<h2>
		<a href="#!defi.calc">
			<span class="memberof">defi.</span>calc<wbr>(<span class="args">obj, targetKey, source, handler<span class="default-value">=(v)=>v</span>, eventOptions</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Creates a dependency of one property value on values of others</p>
</div>
	<div class="description"><p><code>calc</code> creates a dependency of a property (<code>target</code> argument) on values of other properties (<code>source</code> argument). When source property is changed, <code>target</code> is re-calculated automatically.</p>
<p><code>source</code> arg has few variations.</p>
<h4 id="a-string">A string</h4>
<p>A <code>target</code> property is dependent on <code>source</code> property.</p>
<pre><code class="lang-js">obj.b = 1;
defi.calc(obj, &#39;a&#39;, &#39;b&#39;, b =&gt; b * 2);
console.log(obj.a); // 2
</code></pre>
<h4 id="an-array-of-strings">An array of strings</h4>
<p>A <code>target</code> is dependent on properties listed at <code>source</code> array.</p>
<pre><code class="lang-js">obj.b = 1;
obj.c = 2;
obj.d = 3;
defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], (b, c, d) =&gt; b + c + d);
console.log(obj.a); // 6
</code></pre>
<h4 id="an-object-with-properties-object-and-key-">An object with properties <code>object</code> and <code>key</code></h4>
<p>At this case <code>target</code> property is dependent on a property from another object.</p>
<pre><code class="lang-js">const someObject = { b: 1 };
defi.calc(obj, &#39;a&#39;, {
    object: someObject,
    key: &#39;b&#39;
}, b =&gt; b * 2);

console.log(obj.a); // 2
</code></pre>
<p><code>key</code> property also accepts an array of property names.</p>
<pre><code class="lang-js">const someObject = {
    b: 1,
    c: 2,
    d: 3
};
defi.calc(obj, &#39;a&#39;, {
    object: someObject,
    key: [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;]
}, (b, c, d) =&gt; b + c + d);

console.log(obj.a); // 6
</code></pre>
<h4 id="an-array-of-object-with-properties-object-key-">An array of object with properties <code>object</code> и <code>key</code></h4>
<p>This variation allows to define dependency from properties of different objects.</p>
<pre><code class="lang-js">const someObjectX = {
    b: 1,
    c: 2
};
const someObjectY = {
    d: 3
};
defi.calc(obj, &#39;a&#39;, [{
    object: someObjectX,
    key: [&#39;b&#39;, &#39;c&#39;]
}, {
    object: someObjectY,
    key: &#39;d&#39;
}], (b, c, d) =&gt; b + c + d);

console.log(obj.a); // 6
</code></pre>
<h4 id="a-combination-of-strings-own-properties-and-objects">A combination of strings (own properties) and objects</h4>
<pre><code class="lang-js">obj.b = 1;
obj.c = 2;

const someObject = {
    d: 3,
    e: 4
};

defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;, {
    object: someObjectX,
    key: [&#39;d&#39;, &#39;e&#39;]
}], (b, c, d, e) =&gt; b + c + d + e);

console.log(obj.a); // 10
</code></pre>
<p>For reasons of code purity, the combination of strings and objects inside <code>source</code> array is not recommended. Instead, pass an object whose <code>object</code> property refers to source object. An example below makes the same job as shown at the previous example.</p>
<pre><code class="lang-js">obj.b = 1;
obj.c = 2;

const someObject = {
    d: 3,
    e: 4
};

defi.calc(obj, &#39;a&#39;, [{
    object: obj, // the target object
    keys: [&#39;b&#39;, &#39;c&#39;]
}, {
    object: someObjectX,
    key: [&#39;d&#39;, &#39;e&#39;]
}], (b, c, d, e) =&gt; b + c + d + e);

console.log(obj.a); // 10
</code></pre>
<h4 id="a-path-to-source-property">A path to source property</h4>
<p>If source property name includes a dot then the function initiates a dependency on a property from nested object.</p>
<pre><code class="lang-js">obj.b = { c: { d: 1 } };
obj.e = { f: { g: 2 } };

defi.calc(obj, &#39;a&#39;, [&#39;b.c.d&#39;, &#39;e.f.g&#39;], (d, g) =&gt; d + g);

console.log(obj.a); // 3
</code></pre>
<p>The same thing works for external sources.</p>
<pre><code class="lang-js">obj.b = { c: { d: 1 } };
const someObject = { e: { f: { g: 2 } } };

defi.calc(obj, &#39;a&#39;, [{
    object: obj
    key: &#39;b.c.d&#39;
}, {
    object: someObject
    key; &#39;e.f.g&#39;
}], (d, g) =&gt; d + g);

console.log(obj.a); // 3
</code></pre>
<blockquote>
<p>The function is protected from circular references (for example, <code>a</code> depends on <code>b</code>, <code>b</code> depends on <code>c</code> and <code>c</code> depends on <code>a</code>) and if there is a calculation problem, it does not block the page and does not throw an exception about the stack over-flow.</p>
</blockquote>
<p>As you may noticed, arguments of <code>handler</code> function always follow the same order as source properties appear.</p>
<p>In case if you want to change a value of one source property and make it so that target property will not be recalculated, then use <a href="#!defi.set">defi.set</a> function with <code>skipCalc</code> flag.</p>
<pre><code class="lang-js">defi.calc(obj, &#39;a&#39;, &#39;b&#39;, handler);
defi.set(obj, &#39;b&#39;, newValue, {
    skipCalc: true
});
</code></pre>
<h3 id="important-features-of-the-function-and-special-flags">Important features of the function and special flags</h3>
<p>The fifth argument of <code>calc</code> function is  <code>eventOptions</code>. As usual this object can include special flags or custom data which will be passed to <code>change:TARGET</code> event handler.</p>
<pre><code class="lang-js">defi.on(obj, &#39;change:a&#39;, evt =&gt; {
    console.log(evt.foo); // &#39;bar&#39;
});

defi.calc(obj, &#39;a&#39;, source, handler, { foo: &#39;bar&#39; });
</code></pre>
<h4 id="a-flag-debouncecalc-true-">A flag <code>debounceCalc=true</code></h4>
<p>After <code>calc</code> is called, a target property is calculated with no delays. But when source property is changed the debounce pattern is used. That means that target property will be changed in few milliseconds and only once even if source properties was changed many times in a short time.</p>
<pre><code class="lang-js">obj.b = 1;
obj.c = 2;
obj.d = 3;

defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], (b, c, d) =&gt; b + c + d);

defi.on(obj, &#39;change:a&#39;, () =&gt; {
    // the handler will be called only once
    // despite that source properties was changed thrice
    console.log(`a is changed to ${obj.a}`); // a is changed to 60
});

obj.b = 10;
obj.c = 20;
obj.d = 30;
console.log(obj.a); // 6 instead of 60
</code></pre>
<p>To cancel debounce pattern when source properties are changed, in other words to make the calculation synchronously pass <code>debounceCalc</code> with <code>false</code> value to the function.</p>
<pre><code class="lang-js">obj.b = 1;
obj.c = 2;
obj.d = 3;

defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], (b, c, d) =&gt; b + c + d, {
    debounceCalc: false
});

defi.on(obj, &#39;change:a&#39;, () =&gt; {
    // the handler will be called thrice
    // every time when b, c or d are changed

    // a is changed to... 15, 33, 60
    console.log(`a is changed to ${obj.a}`);
});

obj.b = 10;
obj.c = 20;
obj.d = 30;
console.log(obj.a); // 60
</code></pre>
<h4 id="a-flag-debouncecalconinit-false-">A flag <code>debounceCalcOnInit=false</code></h4>
<p>As described above, target property is calculated immediately after the <code>calc</code> is called. To turn on debounce on <code>calc</code> call pass <code>debounceCalcOnInit</code> with <code>true</code> value to the function.</p>
<pre><code class="lang-js">defi.on(obj, &#39;change:a&#39;, () =&gt; {
    // the handler will be called only once in a moment
    console.log(`a is changed to ${obj.a}`); // a is changed to 6
});

obj.b = 1;
obj.c = 2;
obj.d = 3;

defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;, &#39;d&#39;], (b, c, d) =&gt; b + c + d, {
    debounceCalcOnInit: true
});

console.log(obj.a); // undefined
</code></pre>
<p>In real world <code>debounceCalcOnInit</code> flag is unlikely to be useful. Just keep in mind that you can enable &quot;total debounce&quot; if needed.</p>
<h4 id="a-flag-debouncecalcdelay-0-">A flag <code>debounceCalcDelay=0</code></h4>
<p>The flag can be used to set debounce delay when <code>debounceCalc</code> or <code>debounceCalcOnInit</code> is set as <code>true</code>.</p>
<h4 id="a-flag-setoninit-true-">A flag <code>setOnInit=true</code></h4>
<p>It is known that target property gets new value after <code>calc</code> is called. To cancel this behavior and don&#39;t calculate a property immediately use <code>setOnInit</code> with <code>false</code> value.</p>
<pre><code class="lang-js">defi.calc(obj, &#39;a&#39;, &#39;b&#39;, b =&gt; b * 2, {
    setOnInit: false
});

console.log(obj.a); // undefined

// but if obj.b is changed the target property will be calculated
obj.b = 1;
</code></pre>
<h4 id="a-flag-exactkey-false-">A flag <code>exactKey=false</code></h4>
<p>As described above, it&#39;s possible to use a path to source property using a string that contains dots. In case if you need to use exact name of source property use <code>exactKey</code> with <code>true</code> value.</p>
<pre><code class="lang-js">obj[&#39;foo.bar.baz&#39;] = 1;
defi.calc(obj, &#39;a&#39;, &#39;foo.bar.baz&#39;, fooBarBaz =&gt; fooBarBaz * 2, {
    exactKey: true
});
console.log(obj.a); // 2
</code></pre>
<h4 id="a-flag-promisecalc-false-">A flag <code>promiseCalc=false</code></h4>
<p>This flag allows to return <code>Promise</code> instance from the calculating function. Target property gets its value from resolved promise.</p>
<blockquote>
<p>Warning! <code>Promise</code> cannot be canceled. Use the <code>promiseCalc</code> feature carefully and don&#39;t allow multiple calls of heavy functions.</p>
</blockquote>
<pre><code class="lang-js">defi.calc(obj, &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;], (b, c) =&gt; {
    return new Promise(resolve =&gt; {
        setTimeout(() =&gt; {
            resolve(a + b)
        }, 1000);
    });
}, {
    promiseCalc: true
});

obj.b = 1;
obj.c = 2;

// &quot;a&quot; will be changed in a second
</code></pre>
<pre><code class="lang-js">defi.calc(obj, &#39;response&#39;, &#39;data&#39;, async (data) =&gt; {
    const resp = await fetch(url, {
        method: &#39;post&#39;,
        body: data
    });

    return resp.json();
}, {
    promiseCalc: true
});
</code></pre>
</div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				<th>Default
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					<td><code></code> 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						targetKey
						
					</td>
					<td><code></code> 
					<td>
	<span data-type="string">string</span>
</td>
					<td> <p>A property which needs to be calculated</p>
</td>
				</tr>
			
				<tr>
					<td>
						source
						
					</td>
					<td><code></code> 
					<td>
	<span data-type="string">string</span>

	<span data-type="array">array</span>
</td>
					<td> <p>Which properties the target property is depended on</p>
</td>
				</tr>
			
				<tr>
					<td>
						handler
						
							<span class="signature">optional</span>
						
					</td>
					<td><code>(v)=>v</code> 
					<td>
	<span data-type="function">function</span>
</td>
					<td> <p>A function which returns a new value</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					<td><code></code> 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>An object which can contain some special flags or data for <code>change:KEY</code> handler (see above)</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.calc(obj, 'greeting', 'name', name => `Hello, ${name}!`);

obj.name = 'World';

// ... in a moment
alert(obj.greeting); // 'Hello, World!'</code></pre>

    <h4><p>The calculation of the rectangle perimeter with two sides known (and the calculation of the sides with the perimeter known)</p>
</h4>

<pre><code class="lang-js">obj.a = 3;
obj.b = 4;

obj.chain(obj)
    .calc('p', ['a', 'b'], (a, b) => (a + b) * 2)
    .calc('a', ['p', 'b'], (p, b) => p/2 - b)
    .calc('b', ['p', 'a'], (p, a) => p/2 - a);

alert(obj.p); // 14

defi.on(obj, 'change:p', () => {
    // "The perimeter has been changed and equals 18"
    console.log(`The perimeter has been changed and equals ${obj.p}`);
});

obj.a = 5;</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.calc.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.calc" data-title="Method defi.calc">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.calc"
  title="Method defi.calc"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.calc(batch)">
	<h2>
		<a href="#!defi.calc(batch)">
			<span class="memberof">defi.</span>calc<wbr>(<span class="args">obj, batch, commonEventOptions</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Extra syntax for <a href="#!defi.calc">defi.calc</a>. Allows to define few calculated properties per single call of the function.</p>
</div>
	<div class="description"><p>The first argument is an object whose keys are property names and values are objects with the following data:</p>
<ul>
<li><code>source</code> - which properties the target property is depended on;</li>
<li><code>handler</code> - a function which returns a new value of a property (by default it equals to <code>(value) =&gt; value</code>);</li>
<li><code>event</code> - event options.</li>
</ul>
<p>The third argument contains common event options which extend <code>event</code> of every item (properties of <code>event</code> have higher priority).</p>
<p><code>source</code> can take any kind of look as <a href="#!defi.calc">described above</a> (a string, an array of strings etc).</p>
</div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						batch
						
					</td>
					 
					<td>
	<span data-type="array">array</span>
</td>
					<td> <p>An object which includes all information about calculated properties</p>
</td>
				</tr>
			
				<tr>
					<td>
						commonEventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>Event options which are common for all listed calculated properties</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.calc(obj, {
	x: {
    	source: ['a', 'b'],
    	handler: (a, b) => a + b
	},
	y: {
	    source: {
	        object: someObject,
	        key: 'c'
	    },
	    event: {
	        setOnInit: false
	    }
	},
	z: {
	    source: [{
	        object: this,
	        key: 'x'
	    }, {
	        object: someObject,
	        key: 'd'
	    }],
	    handler: (x, d) => x + d
	}
}, {
    debounceCalc: false
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.calc.jsdoc.js#L352">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.calc(batch)" data-title="Method defi.calc(batch)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.calc(batch)"
  title="Method defi.calc(batch)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.chain">
	<h2>
		<a href="#!defi.chain">
			<span class="memberof">defi.</span>chain<wbr>(<span class="args">obj</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<p class="module">
		CommonJS module: <code>'matreshka/chain'</code>
	</p>
	
	<div class="summary"><p>Allows chained calls of defi.js functions</p>
</div>
	<div class="description"><p>The function accepts any object and returns an instance of externally inaccessible class which adopts function allowing them to be called in a chain to change given object.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - An instance of the class which adopts defi functions


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>An object</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const obj = {};
defi.chain(obj)
    .calc('a', 'b', b => b * 2)
    .set('b', 3)
    .bindNode('c', '.node');

// the same as
// defi.calc(obj, 'a', 'b', b => b * 2)
// defi.set(obj, 'b', 3)
// defi.bindNode(obj, 'c', '.node');</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.chain.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.chain" data-title="Method defi.chain">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.chain"
  title="Method defi.chain"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.lookForBinder">
	<h2>
		<a href="#!defi.lookForBinder">
			<span class="memberof">defi.</span>lookForBinder<wbr>(<span class="args">node</span>)
				
		</a> <span class="returns">→ 
	<span data-type="binder">binder</span>
</span>
	</h2>
	
	
	<p class="module">
		CommonJS module: <code>'matreshka/lookforbinder'</code>
	</p>
	
	<div class="summary"></div>
	<div class="description"><p>Returns a binder corresponding to an element. If it is not found, it returns <code>undefined</code>. The function uses <a href="#!defi.defaultBinders">defi.defaultBinders</a> for the search.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="binder">binder</span>

		 - binder


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						node
						
					</td>
					 
					<td>
	<span data-type="node">node</span>
</td>
					 </td>
				</tr>
			
		</tbody>
	</table>


	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.bindNode">defi.bindNode</a>
	
		<li><a href="#!defi.defaultBinders">defi.defaultBinders</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">const element = document.createElement('input');
element.type = 'text';

console.log(defi.lookForBinder(element));

// will return something similar to the following object
{
	on: 'input',
	getValue() {
		return this.value;
	},
	setValue(v) {
		this.value = v;
	}
}</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.lookForBinder.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.lookForBinder" data-title="Method defi.lookForBinder">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.lookForBinder"
  title="Method defi.lookForBinder"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.mediate">
	<h2>
		<a href="#!defi.mediate">
			<span class="memberof">defi.</span>mediate<wbr>(<span class="args">obj, key, mediator</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Transforms property value on its changing</p>
</div>
	<div class="description"><p>This function is used for transforming property value on its changing. For example, you want the property value to be always either of a certain type or an integer value, or to be no less than zero and no more than a hundred etc.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						key
						
					</td>
					 
					<td>
	<span data-type="string">string</span>

	<span data-type="array">array</span>
</td>
					<td> <p>A key or an array of keys</p>
</td>
				</tr>
			
				<tr>
					<td>
						mediator
						
					</td>
					 
					<td>
	<span data-type="function">function</span>
</td>
					<td> <p>A function-mediator which returns a new value. It gets the following arguments: new value, previous value, a key, an object itself</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.mediate(obj, 'x', value => String(value));

obj.x = 1;

alert(typeof this.x); // "string"</code></pre>

    <h4><p>An array of keys</p>
</h4>

<pre><code class="lang-js">defi.mediate(obj, ['x', 'y'], value => String(value));</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.mediate.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.mediate" data-title="Method defi.mediate">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.mediate"
  title="Method defi.mediate"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.mediate(2)">
	<h2>
		<a href="#!defi.mediate(2)">
			<span class="memberof">defi.</span>mediate<wbr>(<span class="args">keyMediatorPairs</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Alternative syntax of the <a href="#!defi.mediate">defi.mediate</a> function which accepts &quot;key-mediator&quot; object as an argument</p>
</div>
	<div class="description"></div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						keyMediatorPairs
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>An object with key-mediator properties</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.mediate(obj, {
	x: String,
	y: Number,
	z: Boolean
});
obj.x = 1;
obj.y = 2;
obj.z = 3;
alert(typeof obj.x); // "string"
alert(typeof obj.y); // "number"
alert(typeof obj.z); // "boolean"</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.mediate.jsdoc.js#L24">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.mediate(2)" data-title="Method defi.mediate(2)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.mediate(2)"
  title="Method defi.mediate(2)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.off">
	<h2>
		<a href="#!defi.off">
			<span class="memberof">defi.</span>off<wbr>(<span class="args">obj, names, callback</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Deletes an event handler</p>
</div>
	<div class="description"><p>It deletes a handler which has been created before. All arguments (except of a target object of course) are optional. You can delete both all the events (without passing event names) and separate ones (having passed only the event name, the event name and the handler).</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	
	<p>
		<b>Fires</b> <span class="event">removeevent</span> <span class="event">removeevent:NAME</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						names
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventNames">eventNames</span>
</td>
					<td> <p>A list of event names which are separated by spaces (for example, <code>&quot;change:x ajaxcomplete change:y&quot;</code>)</p>
</td>
				</tr>
			
				<tr>
					<td>
						callback
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventHandler">eventHandler</span>
</td>
					<td> <p>A function-handler</p>
</td>
				</tr>
			
		</tbody>
	</table>


	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.on">defi.on</a>
	
		<li><a href="#!defi.once">defi.once</a>
	
		<li><a href="#!defi.onDebounce">defi.onDebounce</a>
	
		<li><a href="#!defi.trigger">defi.trigger</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.off(obj, 'change:x bind');</code></pre>

    <h4><p>The deletion of all events</p>
</h4>

<pre><code class="lang-js">defi.off(obj);</code></pre>

    <h4><p>The deletion of an event with definite handler</p>
</h4>

<pre><code class="lang-js">const handler = function() {
	//...
}
defi.on(obj, 'change:x', handler);
defi.off(obj, 'change:x', handler);</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.off.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.off" data-title="Method defi.off">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.off"
  title="Method defi.off"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.on">
	<h2>
		<a href="#!defi.on">
			<span class="memberof">defi.</span>on<wbr>(<span class="args">obj, names, callback, triggerOnInit</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Adds an event handler</p>
</div>
	<div class="description"><p>The function adds an event handler for an object. Refer to the complete list of possible events with the description here: <span data-type="eventNames">eventNames</span>.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	
	<p>
		<b>Fires</b> <span class="event">addevent</span> <span class="event">addevent:NAME</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						names
						
					</td>
					 
					<td>
	<span data-type="eventNames">eventNames</span>
</td>
					<td> <p>An event name or some names which are separated by a space (for example, <code>&quot;change:x ajaxcomplete change:y&quot;</code>)</p>
</td>
				</tr>
			
				<tr>
					<td>
						callback
						
					</td>
					 
					<td>
	<span data-type="eventHandler">eventHandler</span>
</td>
					<td> <p>A function which is caused by the event</p>
</td>
				</tr>
			
				<tr>
					<td>
						triggerOnInit
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="boolean">boolean</span>
</td>
					<td> <p>If <code>triggerOnInit</code> argument equals <code>true</code>, the handler will be called immediately after event initialization.</p>
</td>
				</tr>
			
		</tbody>
	</table>


	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.off">defi.off</a>
	
		<li><a href="#!defi.trigger">defi.trigger</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.on(obj, 'foo', () => {
	alert('Custom Event is fired');
});

defi.trigger(obj, 'foo');</code></pre>

    <h4><p>Calling a handler immediately after event initialization</p>
</h4>

<pre><code class="lang-js">// Displays "bar" at once and waits for a firing of "foo" event
defi.on(obj, 'foo', () => {
	alert('bar');
}, true);</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.on.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.on" data-title="Method defi.on">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.on"
  title="Method defi.on"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.on(2)">
	<h2>
		<a href="#!defi.on(2)">
			<span class="memberof">defi.</span>on<wbr>(<span class="args">obj, evtnameHandlerObject, triggerOnInit, obj</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Alternative syntax: &quot;eventname-handler&quot; pairs</p>
</div>
	<div class="description"><p>In the <a href="#!defi.on">defi.on</a> function the object with the key-element pairs can be passed to avoid multiple invocation of the function and reduce your code.</p>
</div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						evtnameHandlerObject
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>An object where keys are event names and values are event handlers</p>
</td>
				</tr>
			
				<tr>
					<td>
						triggerOnInit
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="boolean">boolean</span>
</td>
					<td> <p>If <code>triggerOnInit</code> argument  equals <code>true</code>, all handlers will be called immediately after event initialization.</p>
</td>
				</tr>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.on(obj, {
	'custom': evt => ...,
	'click::x': evt => ...,
	'change:y': evt => ...,
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.on.jsdoc.js#L29">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.on(2)" data-title="Method defi.on(2)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.on(2)"
  title="Method defi.on(2)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.remove">
	<h2>
		<a href="#!defi.remove">
			<span class="memberof">defi.</span>remove<wbr>(<span class="args">obj, key, eventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Deletes a property and removes dependent handlers</p>
</div>
	<div class="description"></div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	
	<p>
		<b>Fires</b> <span class="event">delete</span> <span class="event">delete:KEY</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						key
						
					</td>
					 
					<td>
	<span data-type="string">string</span>
</td>
					<td> <p>A property name or an array of names to remove</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>An event options</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.remove(obj, 'myKey');
defi.remove(obj, ['myKey1', 'myKey2']);</code></pre>

    <h4><p>Using  <code>eventOptions</code></p>
</h4>

<pre><code class="lang-js">defi.remove(obj, 'myKey', {
	silent: true
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.remove.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.remove" data-title="Method defi.remove">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.remove"
  title="Method defi.remove"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.set">
	<h2>
		<a href="#!defi.set">
			<span class="memberof">defi.</span>set<wbr>(<span class="args">obj, key, value, eventOptions</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Sets a property value allowing to pass event options object</p>
</div>
	<div class="description"><p>The list of the supported flags:</p>
<ul>
<li><code>silent</code> -  do not call the <code>change</code> and <code>change:KEY</code> events</li>
<li><code>silentHTML</code> - do not change states of bound HTML nodes</li>
<li><code>force</code> - call the <code>change</code> and <code>change:KEY</code> events even though the property value has not been changed</li>
<li><code>forceHTML</code> - change a state of bound element even though the property value has not been changed. This option is usable if the bound element has been rendered after the binding (for example, some <code>option</code> tags have been added to <code>select</code> tag)</li>
<li><code>skipMediator</code> - prevents the property transformation by a mediator (see <a href="#!defi.mediate">defi.mediate</a>)</li>
<li><code>skipCalc</code> - prevents the work of dependencies created with <a href="#!defi.calc">defi.calc</a></li>
</ul>
</div>
	
	
	<p>
		<b>Fires</b> <span class="event">change</span> <span class="event">change:KEY</span> <span class="event">beforechange</span> <span class="event">beforechange:KEY</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						key
						
					</td>
					 
					<td>
	<span data-type="string">string</span>
</td>
					<td> <p>A key</p>
</td>
				</tr>
			
				<tr>
					<td>
						value
						
					</td>
					 
					<td>
	<span data-type="*">*</span>
</td>
					<td> <p>A value</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>Event options</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.on(obj, 'change:myKey', evt => {
	alert(evt.value);
});

// the same as obj['myKey'] = 3
// or obj.myKey = 3
// alerts 3
defi.set(obj, 'myKey', 3);</code></pre>

    <h4><p>Using <code>eventOptions</code></p>
</h4>

<pre><code class="lang-js">defi.on(obj, 'change:myKey', evt => {
	alert(evt.value);
});

// the handler isn't fired
defi.set(obj, 'myKey', 4, {
	silent: true
});</code></pre>

    <h4><p>Passing custom data to a handler</p>
</h4>

<pre><code class="lang-js">defi.on(obj, 'change:myKey', evt => {
	alert(evt.myCustomFlag);
});

// alerts 42
defi.set(obj, 'myKey', 4, {
	myCustomFlag: 42
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.set.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.set" data-title="Method defi.set">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.set"
  title="Method defi.set"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.set(2)">
	<h2>
		<a href="#!defi.set(2)">
			<span class="memberof">defi.</span>set<wbr>(<span class="args">obj, keyValuePairs, eventOptions</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Alternative &quot;key-value&quot; syntax of the <a href="#!defi.set">defi.set</a> function</p>
</div>
	<div class="description"></div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						keyValuePairs
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>An object containing key-value pairs</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>An event object</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.set(obj, {
	myKey1: 1,
	myKey2: 2
});</code></pre>

    <h4><p>Passing  <code>eventOptions</code> as a second argument</p>
</h4>

<pre><code class="lang-js">defi.set(obj, {
	myKey: 3
}, {
	myFlag: 'foo'
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.set.jsdoc.js#L51">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.set(2)" data-title="Method defi.set(2)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.set(2)"
  title="Method defi.set(2)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.trigger">
	<h2>
		<a href="#!defi.trigger">
			<span class="memberof">defi.</span>trigger<wbr>(<span class="args">obj, names, arg</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Fires an event</p>
</div>
	<div class="description"><p>After adding event handlers using <a href="#!defi.on">defi.on</a> any event can be fired manually using this function.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						names
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventNames">eventNames</span>
</td>
					<td> <p>An event name or some names which are separated by a space</p>
</td>
				</tr>
			
				<tr>
					<td>
						arg
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="*">*</span>
</td>
					<td> <p>Any arguments which will be passed to every event handler</p>
</td>
				</tr>
			
		</tbody>
	</table>


	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.on">defi.on</a>
	
		<li><a href="#!defi.off">defi.off</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.on(obj, 'foo bar', (a, b, c) => {
	alert(a + b + c);
});
defi.trigger(obj, 'foo', 1, 2, 3); // alerts 6</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.trigger.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.trigger" data-title="Method defi.trigger">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.trigger"
  title="Method defi.trigger"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.unbindNode">
	<h2>
		<a href="#!defi.unbindNode">
			<span class="memberof">defi.</span>unbindNode<wbr>(<span class="args">obj, undefined, node, eventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Destroys a binding between given property and HTML node</p>
</div>
	<div class="description"><p>Using this function you can delete a binding between a property and HTML node, which has been added recently and no longer needed.</p>
</div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	
	<p>
		<b>Fires</b> <span class="event">unbind</span> <span class="event">unbind:KEY</span>

	</p>
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						
						
					</td>
					 
					<td>
	<span data-type="string">string</span>

	<span data-type="null">null</span>
</td>
					<td> <p>A key or an array of keys. If you pass <code>null</code> instead of the key, all bindings for the given object will be deleted</p>
</td>
				</tr>
			
				<tr>
					<td>
						node
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="string">string</span>

	<span data-type="node">node</span>

	<span data-type="$nodes">$nodes</span>
</td>
					<td> <p>HTML node</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>Event object (<code>&quot;silent&quot;</code> key disables firing the events <code>&quot;unbind&quot;</code> and <code>&quot;unbind:KEY&quot;</code>)</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.bindNode(obj, 'myKey', '.my-element');

// changes the property value and the state of the HTML element
obj.myKey = true;

defi.unbindNode(obj, 'myKey', '.my-element');

// only the property value is being changed now
obj.myKey = false;</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.unbindNode.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.unbindNode" data-title="Method defi.unbindNode">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.unbindNode"
  title="Method defi.unbindNode"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.unbindNode(2)">
	<h2>
		<a href="#!defi.unbindNode(2)">
			<span class="memberof">defi.</span>unbindNode<wbr>(<span class="args">obj, bindings, eventOptions</span>)
				
		</a> <span class="returns">→ 
	<span data-type="object">object</span>
</span>
	</h2>
	
	
	<div class="summary"><p>Alternative syntax which allows to pass an object with bindings to <code>unbindNode</code>. Look at <a href="#!defi.bindNode(2)">defi.bindNode(2)</a> for more information</p>
</div>
	<div class="description"></div>
	
	<p>
		<b>Returns</b> 
	<span data-type="object">object</span>

		 - obj


	</p>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						bindings
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>(see the example)</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>(see above)</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.unbindNode(obj, {
	foo: '.aaa'
	bar: {
		node: '.bbb'
	},
	baz: [{
		node: '.ccc'
	}, {
		node: '.ddd'
	}]
});</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.unbindNode.jsdoc.js#L25">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.unbindNode(2)" data-title="Method defi.unbindNode(2)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.unbindNode(2)"
  title="Method defi.unbindNode(2)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>

<article class="item method" id="!defi.unbindNode(3)">
	<h2>
		<a href="#!defi.unbindNode(3)">
			<span class="memberof">defi.</span>unbindNode<wbr>(<span class="args">obj, batch, eventOptions</span>)
				
		</a> 
	</h2>
	
	
	<div class="summary"><p>Alternative syntax of the function which allows to easily unbind unlimited amount of bindings by single <code>unbindNode</code> call.</p>
</div>
	<div class="description"><p>The variation makes possible to pass an array which includes objects with the following properties:</p>
<ul>
<li><code>key</code> - a property name</li>
<li><code>node</code> - a node bound to <code>key</code> (optional)</li>
</ul>
<p>This variation is useful because it matches one variation of <a href="#!defi.bindNode">defi.bindNode</a> function, allowing to store bindings in a variable to easily remove them when needed.</p>
</div>
	
	

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						obj
						
					</td>
					 
					<td>
	<span data-type="object">object</span>
</td>
					<td> <p>A target object</p>
</td>
				</tr>
			
				<tr>
					<td>
						batch
						
					</td>
					 
					<td>
	<span data-type="array">array</span>
</td>
					<td> <p>An array of bindings</p>
</td>
				</tr>
			
				<tr>
					<td>
						eventOptions
						
							<span class="signature">optional</span>
						
					</td>
					 
					<td>
	<span data-type="eventOptions">eventOptions</span>
</td>
					<td> <p>(see above)</p>
</td>
				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const temporaryBindings = [{
	key: 'a',
	node: '.my-node',
	binder: {
		setValue(v) {
			doSomething(v);
		}
	}
}, {
	key: 'b',
	node: document.querySelectorAll('.bar')
	event: {
		foo: 'bar'
	}
}, {
	key: 'c.d.e',
	node: jQuery('.baz'),
	binder: myBinder(),
	event: {
		silent: true,
		exactKey: true
	}
}]

defi.bindNode(obj, temporaryBindings);

// these bindings are no longer needed
defi.unbindNode(obj, temporaryBindings);</code></pre>

 


	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.unbindNode.jsdoc.js#L48">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.unbindNode(3)" data-title="Method defi.unbindNode(3)">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.unbindNode(3)"
  title="Method defi.unbindNode(3)"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>


<article class="item property" id="!defi.defaultBinders">
	<h2>
		<a href="#!defi.defaultBinders">

			<span class="memberof">defi.</span>defaultBinders</a><span class="type">:
				<span data-type="array">array</span>
			</span>

		<span class="new-badge"></span>
	</h2>
	
	<p class="module">
		CommonJS module: <code>'matreshka/defaultbinders'</code>
	</p>
	
	<div class="summary"><p>An array of functions which return a corresponding binder</p>
</div>
	<div class="description"><p><code>defaultBinders</code> is the array of functions which check an element in turn against given rules in these functions and return a binder (see <span data-type="binder">binder</span>). This array is used when the third argument has not been passed to the <a href="#!defi.bindNode">defi.bindNode</a> function. See more detailed information about bindings in <a href="#!defi.bindNode">defi.bindNode</a> documentation.</p>
</div>
	
<h4>Links</h4>
<ul class="see">
	
		<li><a href="#!defi.bindNode">defi.bindNode</a>
	
		<li><a href="#!defi.lookForBinder">defi.lookForBinder</a>
	
</ul>


	
	<h3>Examples</h3>


<pre><code class="lang-js">defi.defaultBinders.unshift(element => {
	// check if the element has "foo" class name
	if(element.classList.contains('foo')) {
		// if checking is OK, return a new binder
		return {
			on: ...,
			getValue: ...,
			setValue: ...
		};
	}
});

// ...

defi.bindNode(obj, 'myKey', '.foo.bar');</code></pre>

 

	<a class="make-patch-link" target="_blank" href="https://github.com/matreshkajs/matreshka.io/blob/master/doc/en/defi.defaultBinders.jsdoc.js">Found an ussue in the article? Send a patch there.</a>

<a class="comments" data-id="defi.defaultBinders" data-title="Property defi.defaultBinders">Ask a question<i></i></a>
<!--<div class="comments-container"></div>-->
<div class="comments-container"
  href="https://muut.com/i/matreshka/comments/matreshka-:defi.defaultBinders"
  title="Property defi.defaultBinders"
  data-channel="Matreshka"
  data-show_online="false"
  data-upload="false"></div>

</article>




</section>
<section>

	
<article class="item typedef" data-typedef="eventHandler">
	<i class="close-modal"></i>
	<h2>
		eventHandler:
			<span data-type="function">function</span>
		
	</h2>

	<p>An event handler. Takes any arguments passed to <a href="#!defi.trigger">defi.trigger</a></p>

	
	<h4>Arguments</h4>
	<table class="arguments">
		<thead>
			<tr>
				<th>Name
				
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						options
						
					</td>
					 
					<td>
	<span data-type="*">*</span>
</td>
					<td> Any arguments</td>
				</tr>
			
		</tbody>
	</table>


	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const eventHandler = (...args) => {
	console.log(args);
};
defi.on(obj, 'fyeah', eventHandler);
// logs 'foo', 'bar', 'baz'
defi.trigger(obj, 'fyeah', 'foo', 'bar', 'baz');</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="eventNames">
	<i class="close-modal"></i>
	<h2>
		eventNames:
			<span data-type="string">string</span>
		
	</h2>

	<p>Event name or space-delimited list of event names.</p>
<h5 id="custom-events-">Custom events.</h5>
<pre><code class="lang-js">defi.on(obj, &#39;myevent&#39;, () =&gt; {...});
defi.trigger(obj, &#39;myevent&#39;);
</code></pre>
<h5 id="-change-key-which-is-triggered-every-time-when-a-property-is-changed-"><code>change:KEY</code> which is triggered every time when a property is changed.</h5>
<pre><code class="lang-js">defi.on(obj, &#39;change:x&#39;, evt =&gt; {...});
obj.x = 42;
</code></pre>
<h5 id="-beforechange-key-which-is-triggered-every-time-before-a-property-is-changed-"><code>beforechange:KEY</code> which is triggered every time before a property is changed.</h5>
<pre><code class="lang-js">defi.on(obj, &#39;beforechange:x&#39;, evt =&gt; {...});
obj.x = 42;
</code></pre>
<h5 id="-addevent-name-and-addevent-which-are-triggered-on-event-add-"><code>addevent:NAME</code> and <code>addevent</code> which are triggered on event add.</h5>
<pre><code class="lang-js">// for any event
defi.on(obj, &#39;addevent&#39;, evt =&gt; {...});
// for &quot;someevent&quot; event
defi.on(obj, &#39;addevent:someevent&#39;, evt =&gt; {...});
// the line below fires &quot;addevent&quot; and &quot;addevent:someevent&quot;
defi.on(obj, &#39;someevent&#39;, evt =&gt; {...});
</code></pre>
<h5 id="-removeevent-name-and-removeevent-which-are-triggered-on-event-remove-"><code>removeevent:NAME</code> and <code>removeevent</code> which are triggered on event remove.</h5>
<pre><code class="lang-js">// for any event
defi.on(obj, &#39;removeevent&#39;, evt =&gt; {...});
// for &quot;someevent&quot; event
defi.on(obj, &#39;removeevent:someevent&#39;, evt =&gt; {...});
// the line below fires &quot;removeevent&quot; and &quot;removeevent:someevent&quot;
defi.off(obj, &#39;someevent&#39;, evt =&gt; {...});
</code></pre>
<h5 id="-dom_event-key-where-dom_event-is-a-name-of-dom-event-key-is-a-key-a-handler-is-called-when-dom_event-is-triggered-on-a-node-which-is-bound-to-the-key-"><code>DOM_EVENT::KEY</code>, where DOM_EVENT is a name of DOM event, KEY is a key. A handler is called when DOM_EVENT is triggered on a node which is bound to the KEY.</h5>
<pre><code class="lang-js">defi.bindNode(obj, &#39;x&#39;, &#39;.my-div&#39;);
defi.on(obj, &#39;click::x&#39;, evt =&gt; {
    alert(&#39;clicked &quot;.my-div&quot;&#39;);
});
</code></pre>
<h5 id="-dom_event-key-selector-where-dom_event-is-a-name-of-dom-event-key-is-a-key-selector-is-a-selector-a-handler-is-called-when-dom_event-is-triggered-on-a-node-which-matches-the-selector-within-a-node-bound-to-the-key-"><code>DOM_EVENT::KEY(SELECTOR)</code>, where DOM_EVENT is a name of DOM event, KEY is a key, SELECTOR is a selector. A handler is called when DOM_EVENT is triggered on a node which matches the SELECTOR within a node bound to the KEY.</h5>
<pre><code class="lang-html">&lt;div class=&quot;my-div&quot;&gt;
    &lt;button class=&quot;my-button&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="lang-js">defi.bindNode(obj, &#39;x&#39;, &#39;.my-div&#39;);
defi.on(obj, &#39;click::x(.my-button)&#39;, evt =&gt; {
    alert(&#39;clicked &quot;.my-button&quot;&#39;);
});
</code></pre>
<h5 id="delegated-events-path-event-where-path-is-a-path-to-a-target-object-whose-events-we-want-to-listen-event-is-an-event-name-">Delegated events: <code>PATH@EVENT</code>, where PATH is a path to a target object whose events we want to listen, EVENT is an event name.</h5>
<pre><code class="lang-js">defi.on(obj,&#39;a@someevent&#39;, () =&gt; {...});
defi.on(obj, &#39;a.b.c@change:d&#39;, () =&gt; {...});
</code></pre>
<h5 id="any-combinations-all-events-described-above-can-be-combined-">Any combinations. All events described above can be combined.</h5>
<pre><code class="lang-js">this.on(&#39;x.y.z@click::u(.my-selector)&#39;, () =&gt; {...});
</code></pre>

	

	

	

	

 

</article>


	
<article class="item typedef" data-typedef="binder">
	<i class="close-modal"></i>
	<h2>
		binder:
			<span data-type="object">object</span>
		
	</h2>

	<p><code>binder</code> contains all information about how to synchronize an object property value with DOM node state. Every member of a binder uses HTML node as its context (<code>this</code>)</p>

	

	
	<h4>Properties</h4>
	<table class="properties">
		<thead>
			<tr>
				<th>Name
				<th>Type
				<th>Details
			</tr>
		</thead>
		<tbody>
			
				<tr>
					<td>
						on
						
							<span class="signature">optional</span>
						
					<td>
	<span data-type="string">string</span>

	<span data-type="function">function</span>

					<td><p>DOM event (or space-delimited list of events) which tells when the node state is changed. Besides, it accepts a function as a value if you need to customize a listener definition</p>

				</tr>
			
				<tr>
					<td>
						getValue
						
							<span class="signature">optional</span>
						
					<td>
	<span data-type="function">function</span>

					<td><p>A function which tells how to retrieve a value (state) from HTML node when DOM event is fired</p>

				</tr>
			
				<tr>
					<td>
						setValue
						
							<span class="signature">optional</span>
						
					<td>
	<span data-type="function">function</span>

					<td><p>A function which tells how to change DOM node when the property value is changed</p>

				</tr>
			
				<tr>
					<td>
						initialize
						
							<span class="signature">optional</span>
						
					<td>
	<span data-type="function">function</span>

					<td><p>A function which is called before binding is launched. For example it can initialize jQuery plugin or something else</p>

				</tr>
			
				<tr>
					<td>
						destroy
						
							<span class="signature">optional</span>
						
					<td>
	<span data-type="function">function</span>

					<td><p>A function which is called when a binding is removed using <code>unbindNode</code> function</p>

				</tr>
			
		</tbody>
	</table>


	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const binder = {
	on: 'click',
	getValue(bindingOptions) {
		return this.value;
	},
	setValue(v, bindingOptions) {
		this.value = v;
	},
	initialize(bindingOptions) {
		alert('A binding is initialized');
	},
	destroy(bindingOptions) {
		alert('A binding is destroyed');
	}
};

defi.bindNode(obj, 'a', '.my-checkbox', binder);</code></pre>

<pre><code class="lang-js">const binder = {
	on(callback, bindingOptions) {
		this.onclick = callback;
	},
	// ...
};
// ...</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="eventOptions">
	<i class="close-modal"></i>
	<h2>
		eventOptions:
			<span data-type="object">object</span>
		
	</h2>

	<p>An object which can contain service flags or custom data which will be passed to an event handler</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const eventOptions = { silent: true };

obj.a = 1;

defi.on(obj, 'change:a', () => {
	alert('a is changed');
});

defi.set(obj, 'a', 2, eventOptions); // no alert</code></pre>

<pre><code class="lang-js">const eventOptions = { f: 'yeah' };

obj.a = 1;

defi.on(obj, 'change:a', eventOptions => {
	alert(eventOptions.f);
});

defi.set(obj, 'a', 2, eventOptions); // alerts "yeah"</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="node">
	<i class="close-modal"></i>
	<h2>
		node
	</h2>

	<p>A DOM node</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const node = document.querySelector('.foo');</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="$nodes">
	<i class="close-modal"></i>
	<h2>
		$nodes
	</h2>

	<p>DOM nodes collection. For example, jQuery instance or NodeList.</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">let $nodes = $('.foo');
$nodes = document.querySelectorAll('.bar');</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="string">
	<i class="close-modal"></i>
	<h2>
		string
	</h2>

	<p>A string</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const foo = 'bar';</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="boolean">
	<i class="close-modal"></i>
	<h2>
		boolean
	</h2>

	<p>A boolean</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const bool = true;</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="number">
	<i class="close-modal"></i>
	<h2>
		number
	</h2>

	<p>A number</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const num = 42;</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="object">
	<i class="close-modal"></i>
	<h2>
		object
	</h2>

	<p>An object</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const obj = {
	foo: 'x',
	['bar']: 'y'
};</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="array">
	<i class="close-modal"></i>
	<h2>
		array
	</h2>

	<p>An array</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const arr = ['foo', undefined, null, () => {}];</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="function">
	<i class="close-modal"></i>
	<h2>
		function
	</h2>

	<p>A function</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">function comeOnBarbieLetsGoParty() {
	alert("I'm a Barbie girl, in a Barbie world");
}</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="null">
	<i class="close-modal"></i>
	<h2>
		null
	</h2>

	<p>null, just null</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">const x = null;</code></pre>

 

</article>


	
<article class="item typedef" data-typedef="*">
	<i class="close-modal"></i>
	<h2>
		*
	</h2>

	<p>Any type</p>

	

	

	

	
	<h3>Examples</h3>


<pre><code class="lang-js">let whatever = 'foo';
whatever = 42;</code></pre>

 

</article>


</section>
<section>

</section>

	<section hidden>
		<article id="!faq">
			<h2 id="faq"><a href="#!faq">FAQ</a></h2>
<h3 id="how-does-matreshka-work-">How does Matreshka work?</h3>
<p>Matreshka uses accessors, setters in particular, for implementing the two-way data binding and catching the events of property changing.</p>
<p>As an example of how the two-way data binding works (<a href="#!Matreshka-bindNode">bindNode</a> function in particular), have a look at this code:</p>
<pre><code class="lang-js">function bindNode(object, key, node, binder) {
    const value = object[key];
    Object.defineProperty(object, key, {
        get() {
            return value;
        },
        set(v) {
            binder.setValue.call(node, v);
        }
    });

    node.addEventListener(binder.on, () =&gt; {
        value = binder.getValue.call(node);
    });
}
</code></pre>
<p>As you see, it’s real easy (for simplicity, the function doesn’t support many-to-many binding).</p>
<h3 id="is-there-a-routing-in-matreshka-js-">Is there a routing in Matreshka.js?</h3>
<p>Yes. Check out <a href="https://github.com/matreshkajs/matreshka-router">matreshka-router</a>.</p>
<h3 id="how-to-pre-render-an-application-on-a-server">How to pre-render an application on a server</h3>
<p>For the app pre-rendering Matreshka.js can be used on Node.js (<code>window</code> global object can be created via <a href="https://github.com/tmpvar/jsdom">jsdom</a>) or any template system you want on any server platform. The first case is fine for static HTML generation and the second for dynamic pages.</p>
<p>The task of client-side is to restore application state from HTML. <a href="#!Matreshka-bindNode">Matreshka#bindNode</a> extracts element value and assigns it to a property and <a href="#!Matreshka.Array-restore">Matreshka.Array#restore</a> restores a state of a collection.</p>
<h3 id="what-is-debounce">What is &quot;debounce&quot;</h3>
<p>At this page you often can see the phrase &quot;micropattern debounce&quot;. This is widely used pattern which enforces that a function not be called again until a certain amount of time has passed without it being called. More info can be found <a href="https://davidwalsh.name/javascript-debounce-function">there</a>.</p>
<h3 id="how-should-look-like-a-big-application-">How should look like a big application?</h3>
<p>An application written with Matreshka.js usually represents one nested JavaScript object where every branch is <a href="#!Matreshka">Matreshka</a> instance. The new branches are created using <a href="#!Matreshka-instantiate">Matreshka#instantiate</a> which ensures the integrity of the application and allows to replace a state of the application using ordinary assignment.</p>
<h3 id="how-to-render-one-object-at-few-collections">How to render one object at few collections</h3>
<p>The first thing: you need to set <code>bindRenderedAsSandbox</code> as <code>false</code> for an item class. It turns off automatic sandbox initialization for rendered object (two sandboxes for one object aren&#39;t allowed).</p>
<p>The second thing: when <code>render</code> event is fired, check where the object is rendered. Parent array can be get using <code>parentArray</code> property of the event object.</p>
<p>Example. You have <code>User</code> class and two collections <code>UsersA</code> and <code>UsersB</code> (their <a href="#!Matreshka.Array-itemRenderer">Matreshka.Array#itemRenderer</a> can be different). For both collections <code>User</code> is a <a href="#!Matreshka.Array-Model">model</a>.</p>
<pre><code class="lang-js">class User extends Matreshka.Object {
    constructor() {
        super();

        this.bindRenderedAsSandbox = false;

        setInterval(() =&gt; {
            // when &quot;name&quot; is changed
            // both bound nodes also change
            this.name = Math.random();
        }, 5000);
    }
    onRender(evt) {
        const { parentArray, node } = evt;

        if(parentArray instanceof UsersA) {
            this.bindNode({
                // pseudo-sandbox creation for syntax sugar at selectors
                // (not required)
                nodeA: node,
                name: &#39;:bound(nodeA) .name&#39;,
                email: &#39;:bound(nodeA) .email&#39;,
            });
        } else if(parentArray instanceof UsersB) {
            this.bindNode({
                nodeB: node,
                name: &#39;:bound(nodeB) .user-name&#39;,
            });
        }
    }
}
</code></pre>
<p>Actually there are many ways to solve this problem. For example bindings can be declared at classes of the collections (an array will listen to <code>render</code> event of inserted objects)...</p>

		</article>
	</section>

</main>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'matreshkajs/matreshka'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

<div class="typo-badge">
	<span class="close" title="Больше не показывать"></span>
	Found a typo?  <br> Select it and press <br>
	<button>CTRL</button>+<button>Enter</button>
</div>
<form class="typo" method="POST" target="typo-iframe">
	<i class="close-modal"></i>
	<h5>Ошибка на сайте</h5>
	<p class="selection"></p>
	<textarea class="comment" rows="2" placeholder="Комментарий (не обязательно)"></textarea>
	<input type="hidden" class="page">
	<input type="hidden" class="selection">
	<div class="action-bar">
		<button type="submit">Отправить</button>
		<button class="cancel">Отменить</button>
	</div>
</form>
<script>
	setTimeout(function() {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-12418613-4', 'auto');
	    ga('send', 'pageview');
	}, 0);
</script>


		<div class="hide nav-overlay"></div>
		<div class="hide typedef-overlay"></div>
		<div class="hide typo-overlay"></div>
		<script id="pagination-template" type="text/html">
			<div class="pagination">
				<a class="previous-page"></a>
				<a class="next-page"></a>
			</div>
		</script>
	<script type="text/javascript" src="js/app.js"></script></body>
</html>
